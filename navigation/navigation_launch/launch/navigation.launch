<?xml version="1.0"?>
<launch>

  <!-- Depth estimation -->
  <node pkg="depth_estimator" type="depth_estimator_node" name="depth_estimator" output="screen" ns="localization" />


  <group if="$(eval localization == 'ekf')">
    
    <!-- Kalman filter -->
    <rosparam command="load" file="$(find robot_localization)/params/pooltestnovember.yaml" />
    <node pkg="robot_localization" type="ekf_localization_node" name="ekf" output="screen" />

    <!-- Underwater odometry. Creates /dvl/odom, which contains depth and linear vel -->
    <node pkg="underwater_odom" type="underwater_odom_node" name="underwater_odom_node" output="screen" />

  </group>

  <!-- Error State Kalman Filter-->
  <group if="$(eval localization == 'eskf')">
    <rosparam command="load" file="$(find eskf)/apps/ros/parameters/pooltest2021_params.yaml" />
    <node pkg="eskf" type="eskf" name="eskf" output="screen" ns="localization" />
  </group>

  <!-- Simple Odometry-->
  <group if="$(eval localization == 'simple_odom')">
    <node pkg="simple_odometry" type="simple_odometry_node" name="simple_odom_node" output="screen" ns="localization" />
  </group>


</launch>
