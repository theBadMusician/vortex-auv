name: ROS build check

on:
  push:
    branches: [ development ]
  pull_request:
    branches: [ development ]

defaults:
  run:
    shell: bash

jobs:    
  build-and-test-run:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v1
        
      - name: Build the Docker image
        run: docker build . --file Dockerfile --tag auv:ci-build
         
      - name: Deploy and enter container
        run: docker run --rm -it --entrypoint "/bin/bash && source /opt/ros/melodic/setup.bash && cd /home/vortex/auv_ws/ && catkin build" auv:ci-build
        
